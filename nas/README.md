# NAS
This directory contains stuff related to my NAS.

## My NAS
My NAS is running [TrueNAS Scale](https://www.truenas.com/truenas-scale/).  
All app files can be found in the `nas/apps` directory.

### Specs
It's a used PC I got from a local site for 150â‚¬

[PCPartPicker Part List](https://pcpartpicker.com/list/XCxQnp)

Type|Item|Info
:----|:----|:----
**CPU** | [Intel Core i7-4770 3.4 GHz Quad-Core Processor](https://pcpartpicker.com/product/sCNp99/intel-cpu-bx80646i74770) | 
**Motherboard** | [Intel DH87MC ATX LGA1150 Motherboard](https://pcpartpicker.com/product/MWH323/intel-motherboard-boxdh87mc) | Latest BIOS [here](https://web.archive.org/web/20191119130931/https://downloadcenter.intel.com/download/28272/BIOS-Update-MCH8710H-86A-?product=69045) or [here](https://web.archive.org/web/20191122200137/https://downloadmirror.intel.com/28272/eng/MC0164.bio) for a direct download 
**Memory** | [Kingston KVR16N11/8 8 GB (1 x 8 GB) DDR3-1600 CL11 Memory](https://pcpartpicker.com/product/m2PfrH/kingston-memory-kvr16n118) | Will get 2 more 8gb sticks at some point for a total of 32gb 
**Memory** | [Kingston KVR16N11/8 8 GB (1 x 8 GB) DDR3-1600 CL11 Memory](https://pcpartpicker.com/product/m2PfrH/kingston-memory-kvr16n118) | Will get 2 more 8gb sticks at some point for a total of 32gb
**Video Card** | [Asus GT620-DCSL-2GD3 GeForce GT 620 2 GB Video Card](https://pcpartpicker.com/product/w4ckcf/asus-video-card-gt620dcsl2gd3) | Removed it cause it can't even do hardware transcoding for immich or jellyfin :( 
**Power Supply** | [Corsair CX430 430 W 80+ Bronze Certified ATX Power Supply](https://pcpartpicker.com/product/dnxfrH/corsair-cx430-430-w-80-bronze-certified-atx-power-supply-cx430) | 
 | Generated by [PCPartPicker](https://pcpartpicker.com) 2025-06-11 11:46 EDT-0400 |

They didn't include the hard drive sleds, so I decided to learn some 3D modelling and created an external enclosure for them. STL files available in the `nas/enclosure` directory. (Not sure if there'd be any better format to export in?)

### Storage
Storage is split between an ssd and a hdd pool.

#### apps-ssd
This is the solid state pool with a total capacity of 430.31 GiB.  
It consists of 2 ssds in a mirror: A [480GB Kingston drive](https://www.kingston.com/en/ssd/a400-solid-state-drive?partnum=sa400s37%2F480g) and a [500GB Crucial MX500](https://www.crucial.com/ssd/mx500/ct500mx500ssd1) (yeah I know they're mixed capacity, TrueNAS has made me well aware of that ðŸ™„)  
It's mounted at `/mnt/apps-ssd`.

On it, there's only one dataset - `apps`. It contains exactly what's in `nas/apps` here, except api keys and stuff of course.

#### data
This is the spinning disk pool with a total capacity of 18.1 TiB.  
It consists of 3x 10TB hard drives in a RAIDZ1 configuration, meaning one drive worth of data is for parity.  
The drives are refurbished [Seagate Enterprise Capacity drives, specifically ST10000NM0046](https://www.seagate.com/support/internal-hard-drives/enterprise-hard-drives/3-5-hdd-10tb/) which I got for â‚¬122,93 a piece from [a listing on Amazon](https://www.amazon.de/Seagate-Enterprise-Capacity-Festplatte-ST10000NM0046/dp/B0CW6K8DZ3) (price seems to have gone up since then).  
TrueNAS has mounted it at `/mnt/data`.

On this pool, there are a few datasets:
- **data** - Record Size is to the max value. Afaik it's the *maximum* zfs will use, so this shouldn't cause issues?
  - **apps** - data for apps
    - **immich** - stores the immich "upload" directory, this is where everything on immich lives
    - **minecraft**
      - **backups** - stores backups for Minecraft servers
        - **server-name-1** - backups for a server
        - **server-name-2** - backups for another server
  - **media** - used by the media stuff at `nas/apps/streaming-stack`
  - **user** - data for users
    - **user1** - data for a user
    - **user2** - data for another user
###### As far as ZFS is concerned, "nested" datasets on the same pool are all independent of eachother, so you can use `zfs rename` to move em around.
